.PHONY: all

INC := .
override CFLAGS += -std=c99 -Wall -Werror $(patsubst %,-I%,$(subst :, ,$(INC))) # NOTE: -O3 fails tests

all: $(patsubst %.c, %, $(wildcard test/*))
	rm -f $^
	@echo testrail done.

test/%: test/%.o testrail.o $(OBJ)
	$(CC) $^ -o $@
	./$@
