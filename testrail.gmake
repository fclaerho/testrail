.PHONY: cleanup all

CFLAGS := -std=c99 -Wall -Werror -I.
VPATH := .:test

tests := $(patsubst %.c, %, $(wildcard test/*))

all: $(tests)

testrail.o: testrail.c testrail.h

%.o: %.c testrail.h

test/%: %.o testrail.o
	$(CC) $^ -o $@
	./$@

cleanup:
	rm -f *.o $(tests)